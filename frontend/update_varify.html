<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>회원 수정 본인 확인</title>
</head>
<body>

<h2>회원 수정 본인 확인</h2>

<form id="verifyForm">
    <input name="password" type="password" placeholder="비밀번호 입력" required><br><br>
    <button type="submit">확인</button>
</form>

<script>
    const userId = localStorage.getItem("loginUser");

    if (!userId) {
        alert("로그인이 필요합니다.");
        window.location.href = "login.html";
    }

    document.getElementById("verifyForm").addEventListener("submit", async (e) => {
        e.preventDefault();
        const formData = new FormData(e.target);

        const res = await fetch(`http://localhost:8080/members/${userId}/verify`, {
            method: "POST",
            body: formData
        });

        const message = await res.text();

        if (!res.ok) {
            alert(message);
            return;
        }

        alert("본인 확인 완료!");
        window.location.href = "update.html";
    });
</script>

</body>
</html>